name: Deploy Salesforce DX project

on: workflow_dispatch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Install Salesforce CLI
      run: |
        curl https://developer.salesforce.com/media/salesforce-cli/sfdx-linux-amd64.tar.xz | tar xJf 
  
    - name: Authenticate with Salesforce
      run: |
        sfdx --version 
        sfdx force:auth:username -u rishabh.zutshi8@gmail.com -p Zutshicot@23 -r https://login.salesforce.com -a scratchorg
        sfdx force:org:create -s -f config/project-scratch-def.json -a scratchorg
    - name: Push metadata to scratch org
      run: |
        sfdx force:source:push -u scratchorg
